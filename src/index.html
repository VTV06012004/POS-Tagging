<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>POS Tagging Online</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
    }
    #inputtext {
      width: 100%;
      height: 100px;
      padding: 10px;
      font-size: 16px;
    }
    .btn {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #4CAF50;
      color: white;
      cursor: pointer;
    }
    .btn:hover {
      background: #45a049;
    }
    #result {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-family: sans-serif;
    }
    .tag {
      padding: 3px 6px;
      border-radius: 4px;
      margin: 2px;
      display: inline-block;
      cursor: pointer;
      color: #000;
    }
    .adj { background: #FFD966; }
    .adv { background: #E6B8AF; }
    .conj { background: #D9D2E9; }
    .det { background: #C9DAF8; }
    .noun { background: #B4A7D6; }
    .num { background: #93C47D; }
    .prep { background: #F6B26B; }
    .pron { background: #FFE599; }
    .verb { background: #B6D7A8; }
    .propn { background: #6FA8DC; }
    .intj { background: #009737;}
    .other { background: #CCCCCC; }
    #legend {
      margin-top: 20px;
    }
    #legend span {
      display: inline-block;
      padding: 5px 10px;
      margin: 5px;
      border-radius: 4px;
      font-size: 14px;
      color: #000;
    }
  </style>
</head>
<body>
  <h1>POS Tagging Online</h1>
  <p>Nhập câu của bạn và nhấn nút để phân tích từ loại:</p>

  <textarea id="inputtext" placeholder="Nhập câu tại đây..."></textarea>
  <br>
  <button class="btn" onclick="runPOSTagging()">Phân tích POS</button>

  <div id="result">👉 Kết quả sẽ hiển thị ở đây...</div>

  <div id="legend">
    <span class="adj">Adjective</span>
    <span class="adv">Adverb</span>
    <span class="conj">Conjunction</span>
    <span class="det">Determiner</span>
    <span class="noun">Noun</span>
    <span class="num">Number</span>
    <span class="prep">Preposition</span>
    <span class="pron">Pronoun</span>
    <span class="verb">Verb</span>
    <span class="propn">Proper Noun</span>
    <span class="intj">Interjection</span>
  </div>

  <script>  
    const posColors = {
      "ADJ": "adj",
      "ADV": "adv",
      "CCONJ": "conj",
      "SCONJ": "conj",
      "DET": "det",
      "NOUN": "noun",
      "NUM": "num",
      "ADP": "prep",
      "PRON": "pron",
      "VERB": "verb",
      "AUX": "verb",
      "PART": "verb",
      "PROPN": "propn",
      "INTJ": "intj"
    };

    async function runPOSTagging() {
      const text = document.getElementById("inputtext").value.trim();
      if (!text) {
        alert("⚠️ Vui lòng nhập câu!");
        return;
      }

      try {
        const response = await fetch("http://127.0.0.1:8000/pos-tag", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ sentence: text })
        });

        if (!response.ok) throw new Error("API lỗi");

        const data = await response.json();
        renderResult(data.tags);
      } catch (err) {
        console.error(err);
        document.getElementById("result").innerText = "❌ Không kết nối được API.";
      }
    }

    function renderResult(tags) {
      const container = document.getElementById("result");
      container.innerHTML = "";
      tags.forEach(item => {
        const span = document.createElement("span");
        span.className = "tag " + (posColors[item.pos] || "other");
        span.textContent = item.word + " ";
        
        let tag = "";
        if (item.pos == "ADJ") {
          tag = "ADJECTIVE";
        } else if (item.pos == "ADV") {
          tag = "ADVERB";
        } else if (item.pos == "CCONJ" || item.pos == "SCONJ") {
          tag = "CONJUNCTION";
        } else if (item.pos == "DET") {
          tag = "DETERMINER";
        } else if (item.pos == "NOUN") {
          tag = "NOUN";
        } else if (item.pos == "NUM") {
          tag = "NUMBER";
        } else if (item.pos == "ADP") {
          tag = "PREPOSITION";
        } else if (item.pos == "PRON") {
          tag = "PRONOUN";
        } else if (item.pos == "VERB" || item.pos == "AUX" || item.pos == "PART") {
          tag = "VERB";
        } else if (item.pos == "PROPN") {
          tag = "PROPER NOUN";
        } else if (item.pos == "INTJ") {
          tag = "INTERJECTION";
        }

        span.title = `${item.word} → ${tag}`;
        container.appendChild(span);
      });
    }
  </script>
</body>
</html>